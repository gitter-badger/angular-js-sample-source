(function () {

//====================================================================================================================
// Module:    sampleApp-factories
// Optimized: No
// File:      src/dev/factories.js
//====================================================================================================================

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
angular.module('sampleApp-factories',[]);

//--------------------------------------------------------------------------------------------------------------------
// File: src/dev/factories/data-factory.js
//--------------------------------------------------------------------------------------------------------------------

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

angular.module('sampleApp-factories').factory('dataFactory',function(){
    return {
        "https://www.abcd.com/message-get-url":{
            data:[
                {
                    title:"Regarding lectures",
                    content:"Your lecture was not good last week. you had not well prepared",
                    type:"danger"
                },
                {
                    title:"Module registration",
                    content:"Module registration for the new batch will be strating from next week.",
                    type:"info"
                },
                {
                    title:"Module registration2",
                    content:"Module registration for the new batch will be strating from next week.",
                    type:"success"
                },
                {
                    title:"Regarding lectures",
                    content:"Your lecture was not good last week. you had not well prepared",
                    type:"primary"
                },
                {
                    title:"Module registration",
                    content:"Module registration for the new batch will be strating from next week.",
                    type:"info"
                },
            ]
        }
    };
});

//--------------------------------------------------------------------------------------------------------------------
// File: src/dev/factories/url-factory.js
//--------------------------------------------------------------------------------------------------------------------

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

angular.module('sampleApp-factories').factory('urlFactory',function(){
    return {
        messagesGetUrl:"https://www.abcd.com/message-get-url"
    };
});

//====================================================================================================================
// Module:    sampleApp-services
// Optimized: No
// File:      src/dev/services.js
//====================================================================================================================

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

angular.module('sampleApp-services',['sampleApp-factories']);


//--------------------------------------------------------------------------------------------------------------------
// File: src/dev/services/message-service.js
//--------------------------------------------------------------------------------------------------------------------

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

angular.module('sampleApp-services').service('messageService',['xhrService','urlFactory',function(xhrService,urlFactory){
    this.getMessages=function(success,error){
        xhrService.get(function(result){
            success(result.data);
        },function(){
            error('An Unknown error');
        },urlFactory.messagesGetUrl);
    };
}]);


//--------------------------------------------------------------------------------------------------------------------
// File: src/dev/services/xhr-service.js
//--------------------------------------------------------------------------------------------------------------------

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

angular.module('sampleApp-services').service('xhrService',['dataFactory',function(dataFactory){
    this.get=function(success,error,url){
        if(dataFactory[url])
            success(dataFactory[url]);
        else
            error();
    }
}]);
//====================================================================================================================
// Module:    sampleApp-controllers
// Optimized: No
// File:      src/dev/controllers.js
//====================================================================================================================

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

angular.module('sampleApp-controllers',['sampleApp-services']);

//--------------------------------------------------------------------------------------------------------------------
// File: src/dev/controllers/messages-controller.js
//--------------------------------------------------------------------------------------------------------------------

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

angular.module('sampleApp-controllers').controller('sampleController', ['$scope', 'messageService', '$rootScope', function ($scope, messageService, $rootScope) {
        $scope.title = "Messages Controller";
        $scope.description = "This is the message controller. This is the message controller. This is the message controller. This is the message controller. This is the message controller. This is the message controller. This is the message controller. This is the message controller. This is the message controller. This is the message controller. This is the message controller. ";
        $scope.messages = [];

        $rootScope.$on('forceToToggleCloseButtonVisibility', function (event, show) {
            console.log('sampleController $rootScope : ' + show);
        });

        $scope.$on('forceToToggleCloseButtonVisibility', function (event, show) {
            console.log('sampleController $scope : ' + show);
        });

//    messageService.getMessages(function(messages){
//        $scope.messages=messages;
//        console.log("Messages : "+$scope.messages);
//    },function(error){
//        $scope.error=error;
//        console.log("Error "+$scope.error);
//    });

    }]);

//====================================================================================================================
// Module:    app
// Optimized: No
// File:      src/dev/app.js
//====================================================================================================================

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
angular.module('app',[]);
angular.module('sampleApp',['sampleApp-controllers','sampleApp-directives']);
//angular.module('sampleApp').run(['$templateCache']);
//====================================================================================================================
// Module:    sampleApp-directives
// Optimized: No
// File:      src/dev/directives.js
//====================================================================================================================

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

angular.module('sampleApp-directives', ['app','sampleApp-services']);


//--------------------------------------------------------------------------------------------------------------------
// File: src/dev/directives/message-list/message-list-directive.js
//--------------------------------------------------------------------------------------------------------------------

/**
 * @ngdoc directive
 * @name sampleApp.sampleApp-directives:sampleDirectiveElement
 * @element sample-directive-element
 * @function
 *
 * @description
 * Resize textarea automatically to the size of its text content.
 *
 * @example
 <example module="sampleApp">
 <file name="index.html">
 <sample-list-directive-element></sample-list-directive-element>
 </file>
 </example>
 */
angular.module('sampleApp-directives').directive('sampleListDirectiveElement', ['messageService', function (messageService) {
        var link = function ($scope, element, attrs) {
            $scope.messagesList = [];
            $scope.messagesCount=0;
            $scope.showCloseButtons=true;
            
            messageService.getMessages(
                    function (data) {
                        $scope.messagesList = data;
                        $scope.messagesCount=$scope.messagesList.length;
                    },
                    function (err) {
                        $scope.error = err;
                    });
            
            $scope.toggleCloseButtonsVisibility=function(){
                console.log('toggleCloseButtonsVisibility : '+$scope.showCloseButtons);
                $scope.showCloseButtons=!$scope.showCloseButtons;
                $scope.$broadcast('forceToToggleCloseButtonVisibility',$scope.showCloseButtons);
            }

            $scope.$on('messageClosed', function (event,message) {
                var index = $scope.messagesList.indexOf(message);
                $scope.messagesList.splice(index, 1);
            });
        }
        return{
            restrict: 'E',
            scope: {
                count:"="
            },
            replace: true,
            link: link,
            templateUrl: 'src/dev/directives/message-list/message-list-tmp.html'
        }
    }]);
//--------------------------------------------------------------------------------------------------------------------
// File: src/dev/directives/message/message-directive.js
//--------------------------------------------------------------------------------------------------------------------

/**
 * @ngdoc directive
 * @name sampleApp.sampleApp-directives:sampleDirectiveElement
 * @element sample-directive-element
 * @function
 *
 * @description
 * Resize textarea automatically to the size of its text content.
 *
 * @example
   <example module="sampleApp">
     <file name="index.html">
         <sample-directive-element message="'Mesaage content'" title="'Message Title'" type="'success'"></sample-directive-element>
     </file>
   </example>
 */
angular.module('sampleApp-directives').directive('sampleDirectiveElement',['$rootScope', function ($rootScope) {
    var link=function(scope,element){
        scope.close=function(msg){
            $rootScope.$broadcast('messageClosed',msg);
        }
        scope.$on('forceToToggleCloseButtonVisibility',function(event,show){
            if(show)
                element.find('.close').show();
            else
                element.find('.close').hide();
        });
    };
    
    return{
        restrict: 'E',
        replace: true,
        link:link,
        scope: {
            message: "="
        },
        templateUrl:'src/dev/directives/message/message-tmp.html'
    }
}]);

}) ();
//====================================================================================================================
// Module:    sampleApp
// Optimized: No
//====================================================================================================================
